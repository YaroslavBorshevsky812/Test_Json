(this["webpackJsonpfirst-pet"]=this["webpackJsonpfirst-pet"]||[]).push([[0],{11:function(t,e,c){t.exports={cart:"Cart_cart__157w6",cart_inner:"Cart_cart_inner__2B-XH",cart_content:"Cart_cart_content__1Hrhk",cart_btn:"Cart_cart_btn__3lYEY",products:"Cart_products__2mLlZ",commonPrice:"Cart_commonPrice__218n9",commonPrice_text:"Cart_commonPrice_text__1D45L"}},15:function(t,e,c){t.exports={sideBar:"SideBar_sideBar__1WD9A",sideBar_inner:"SideBar_sideBar_inner__23jNO",sideBar_item:"SideBar_sideBar_item__1bKbH",sideBar_item_text:"SideBar_sideBar_item_text__3sQih",sideBar_title:"SideBar_sideBar_title__8lklc"}},16:function(t,e,c){t.exports={mainPage:"MainPage_mainPage__214_K",mainPage_inner:"MainPage_mainPage_inner__3hROU",table_wrapper:"MainPage_table_wrapper__Q-MKk"}},49:function(t,e,c){},75:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c.n(n),a=c(12),i=c.n(a),s=(c(49),c(37)),d=c(38),o=c(44),u=c(41),j=c(26),l=c.n(j),b=c(39),p=c(20),O=c.n(p),m=c(16),_=c.n(m),h=c(8);var f="https://datainlife.ru/junior_task/get_products.php",x=c(21),v=c(10),g=c(23),y=c(11),B=c.n(y),P=c(40),N=c(1);var S=Object(h.b)((function(t){return{commonPrice:t.commonPrice,cart:t.cart}}))((function(t){var e=Object(n.useState)(0),c=Object(g.a)(e,2),r=c[0],a=c[1];return Object(n.useEffect)((function(){var e=0;t.cart.forEach((function(t){e+=t.commonSum})),a(e)}),[t.cart,a]),Object(n.useEffect)((function(){0===r?i.a.render(Object(N.jsx)("div",{}),document.getElementById("panel")):i.a.render(Object(N.jsx)("div",{className:B.a.products,children:t.cart.map((function(t,e){return Object(N.jsx)("div",{children:Object(N.jsxs)("span",{children:[e+1,".\xa0\xa0",t.name," : ",t.qty]})},e)}))}),document.getElementById("panel"))}),[r,t.cart]),Object(N.jsx)("div",{className:B.a.cart,children:Object(N.jsxs)("div",{className:B.a.cart_inner,children:[Object(N.jsx)("h2",{className:B.a.cart_title,children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(N.jsxs)("div",{className:B.a.cart_content,children:[Object(N.jsx)("div",{id:"panel"}),Object(N.jsx)("div",{className:B.a.commonPrice,children:Object(N.jsxs)("span",{className:B.a.commonPrice_text,children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: ",r]})}),Object(N.jsx)("button",{className:B.a.cart_btn,onClick:function(){var e={};t.cart.forEach((function(t){e=Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t.id,t))}));var c={product:{}};Object.keys(e).forEach((function(t){c.product[t]=e[t].qty}));var n=Object(P.serialize)(c);O()({method:"POST",url:"https://datainlife.ru/junior_task/add_basket.php",data:n}).then((function(t){200===t.status&&console.log(t.data)}))}.bind(undefined),children:"send"})]})]})})})),C=c(15),k=c.n(C),E=c(14);var w=Object(h.b)((function(t){return{products:t.products}}))((function(t){return Object(N.jsx)("div",{className:k.a.sideBar,children:Object(N.jsxs)("div",{className:k.a.sideBar_inner,children:[Object(N.jsx)("h3",{className:k.a.sideBar_title,children:"\u0420\u0430\u0437\u0434\u0435\u043b\u044b"}),Object(N.jsx)("ul",{children:t.products&&t.products.map((function(t,e){return Object(N.jsx)("li",{className:k.a.sideBar_item,children:Object(N.jsx)(E.b,{className:k.a.sideBar_item_text,to:"/".concat(t.rid),children:t.rname})},e)}))})]})})})),D=c(3);var L=Object(h.b)(null,(function(t){return{onAdd:function(e){return t(function(t,e){return{type:"ADD",payload:t,id:e}}(e))}}}))((function(t){var e=Object(n.useState)(0),c=Object(g.a)(e,2),r=c[0],a=c[1];return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:Object(N.jsx)("h4",{children:t.product.gid})}),Object(N.jsx)("td",{children:Object(N.jsx)("h4",{children:t.product.gname})}),Object(N.jsx)("td",{children:Object(N.jsxs)("h4",{children:[t.product.gprice," \u0440."]})}),Object(N.jsx)("td",{children:Object(N.jsx)("input",{onChange:function(e){a(e.target.value*t.product.gprice),t.onAdd({id:t.product.gid,name:t.product.gname,qty:e.target.value,commonSum:e.target.value*t.product.gprice})}.bind(undefined),type:"number",min:"0"})}),Object(N.jsx)("td",{children:Object(N.jsxs)("h4",{children:[r," \u0440."]})})]})})),A=function(t){return Object(N.jsxs)("table",{children:[Object(N.jsx)("thead",{children:Object(N.jsx)("tr",{children:Object(N.jsx)("th",{colSpan:"5",children:Object(N.jsx)("h1",{children:t.item.rname})})})}),Object(N.jsx)("tbody",{children:t.item.goods.map((function(t,e){return Object(N.jsx)(L,{product:t},e)}))})]})};var q=Object(h.b)((function(t){return{products:t.products,cart:t.cart}}))((function(t){var e=Object(D.f)().id,c=[];return c=void 0!==e?t.products.filter((function(t){return t.rid===e})):t.products,Object(N.jsx)("div",{className:_.a.table_wrapper,children:t.products&&c.map((function(t,e){return Object(N.jsx)(A,{item:t},e)}))})}));var M=Object(h.b)((function(t){return{products:t.products,cart:t.cart}}),(function(t){return{onLoad:function(e){return t(function(t){return{type:"LOAD",payload:t}}(e))}}}))((function(t){return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(f).then((function(e){var c=e.data;t.onLoad(c)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),Object(N.jsx)("section",{className:_.a.mainPage,children:Object(N.jsxs)("div",{className:_.a.mainPage_inner,children:[Object(N.jsx)(w,{}),Object(N.jsxs)(D.c,{children:[Object(N.jsx)(D.a,{path:"/",exact:!0,children:Object(N.jsx)(q,{})}),Object(N.jsx)(D.a,{path:"/:id",exact:!0,children:Object(N.jsx)(q,{})})]}),Object(N.jsx)(S,{})]})})})),F=function(t){Object(o.a)(c,t);var e=Object(u.a)(c);function c(){return Object(s.a)(this,c),e.apply(this,arguments)}return Object(d.a)(c,[{key:"render",value:function(){return Object(N.jsx)(M,{})}}]),c}(r.a.Component),I=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,76)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),n(t),r(t),a(t),i(t)}))},H=c(43),K=c(42),T={products:[],cart:[],commonPrice:0};var J=Object(H.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD":return Object(v.a)(Object(v.a)({},t),{},{products:e.payload});case"ADD":var c=t.cart.find((function(t){return t.id===e.payload.id}));return Object(v.a)(Object(v.a)({},t),{},{cart:c?t.cart.map((function(t){return t.id===e.payload.id?Object(v.a)(Object(v.a)({},t),{},{qty:e.payload.qty,commonSum:e.payload.commonSum}):t})):[].concat(Object(K.a)(t.cart),[e.payload])});default:return t}}));i.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(h.a,{store:J,children:Object(N.jsx)(E.a,{children:Object(N.jsx)(F,{})})})}),document.getElementById("root")),I()}},[[75,1,2]]]);
//# sourceMappingURL=main.f5098f3e.chunk.js.map